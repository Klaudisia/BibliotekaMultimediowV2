@page "/new-audiobook"
@using BibliotekaMultimediowV2.Database
@using Microsoft.AspNetCore.Components.Forms
@using BibliotekaMultimediowV2.Types
@rendermode InteractiveServer
@inject MediaDb db
@inject NavigationManager Navigation

<PageTitle>Nowy Audiobook</PageTitle>

<h1>Nowy Audiobook</h1>

<EditForm Model="@newAudiobook" OnValidSubmit="SaveAudiobook">
    
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="mb-3">
        <label>Tytuł:</label>
        <InputText @bind-Value="newAudiobook.Title" class="form-control" />
    </div>

    <div class="mb-3">
        <label>Autor:</label>
        <InputText @bind-Value="newAudiobook.Author" class="form-control" />
    </div>

    <div class="mb-3">
        <label>Rok:</label>
        <InputNumber @bind-Value="newAudiobook.Year" class="form-control" />
    </div>

    <button type="submit" class="btn btn-success">Zapisz Audiobook</button>

</EditForm>

@code {

    private Audiobook newAudiobook = new Audiobook();

    private void SaveAudiobook()
    {
        db.Audiobooks.Add(newAudiobook);
        db.SaveChanges();
        Navigation.NavigateTo("/");
    }

}